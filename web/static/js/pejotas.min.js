/**
 * pejotas 4.0.0
 * @license ARV Klerix @ 2016 
 * @author: Jordi Aguilar <klerix.com>
 */
var $pjs=$pjs||{config:{server:"http://localhost:8080/"},version:"4.0.0",divs:{},controllers:[]};$pjs.director={render:function(e){$pjs.divs.main=$('<div class="pjs" />').appendTo(e),$pjs.director._drawMenu(),$pjs.director._drawBody(),$pjs.spinner._draw(),$pjs.director._initRouter()}},$pjs.render=function(e){$pjs.director.render(e)},$pjs.director.menuItems=[{name:"Inicio",icon:"fa-home",route:"/"},{name:"Listar Habilidades",icon:"fa-list",route:"/habilidades/lista"},{name:"Subir personaje",icon:"fa-cloud-upload",route:"personajes/subir"}],$pjs.director._drawMenu=function(){$pjs.divs["menu-container"]=$('<div class="pjs-menu-container" />').appendTo($pjs.divs.main),$pjs.divs.menu=$('<div class="pjs-menu" />').appendTo($pjs.divs["menu-container"]),$("<span>Pejotas <em>v"+$pjs.version+"</em></span>").appendTo($pjs.divs.menu);var e=$("<menu />").appendTo($pjs.divs.menu);$('<span id="pjs-menu-selector"></span>').appendTo(e);for(var o=0;o<$pjs.director.menuItems.length;o++){var n=$pjs.director.menuItems[o];$pjs.director._drawMenuItem(e,n)}},$pjs.director._drawMenuItem=function(e,o){var n='<a title="'+o.name+'"><i class="fa '+o.icon+'" aria-hidden="true"></i></a>';$(n).on("mouseout",function(e){$("#pjs-menu-selector").text("")}).on("mouseover",function(e){$("#pjs-menu-selector").text(this.title)}).on("click",function(e){$pjs.router.navigate(o.route)}).appendTo(e)},$pjs.director._drawBody=function(){$pjs.divs["body-container"]=$('<div class="pjs-body-container" />').appendTo($pjs.divs.main),$pjs.divs.body=$('<div class="pjs-body" />').appendTo($pjs.divs["body-container"])},$pjs.spinner={show:function(){$pjs.divs.loader.jqxLoader("open")},hide:function(){$pjs.divs.loader.jqxLoader("close")},_draw:function(){$pjs.divs.loader=$('<div id="jqxLoader" />').appendTo($pjs.divs.main),$pjs.divs.loader.jqxLoader({width:150,height:100,text:"Cargando..."})}},$pjs.ajax=function(e,o){var n=$.ajax({url:$pjs.config.server+e,dateType:"json"});n.done(function(e){o(e)}),n.fail(function(e,o,n){$pjs.notify("La conexi&oacute;n no se ha podido establecer.","error"),console.error("Ajax request failed",n),$pjs.spinner.hide()})},$pjs.notify=function(e,o){o=o||"error",$('<div style="margin: 0 auto"><div>'+e+"</div></div>").jqxNotification({opacity:.9,autoOpen:!0,appendContainer:".pjs-body",template:o}).on("close",function(){this.remove()})},$pjs.router=new Navigo,$pjs.director._initRouter=function(){$.each($pjs.controllers,function(e,o){$pjs.router.on(o).resolve()}),$pjs.router.on("*",function(){$pjs.divs.body.html("Route not found")}).resolve()},$pjs.controllers.push({"/habilidades/lista":function(e){$pjs.divs.body.html("habs")}}),$pjs.controllers.push({"/personajes/subir":function(e){$pjs.divs.body.html("upload")}}),$pjs.controllers.push({"/":function(e){$pjs.spinner.show(),$pjs.ajax("eventos",function(e){$("<h2>Eventos</h2>").appendTo($pjs.divs.body);var o=$('<div class="pjs-wrapper" />').appendTo($pjs.divs.body);$.each(e,function(e,n){var s=$('<div class="pjs-box pjs-evento" />').appendTo(o);n.custom_logo?s.css("background","url("+n.custom_logo+") no-repeat"):s.html('<div style="padding: 5px"><h3>'+n.nombre+"</h3><p>"+n.descripcion+"</p></div>")}),$pjs.spinner.hide()})}}),function(e){e.fn.pejotas=function(e){$pjs.render(this)}}(jQuery),$pjs.debugLevel=2,$pjs.messageLevels={1:"e",2:"w",3:"n",4:"d",5:"v"},$pjs.plainConsole=!1,$pjs.report=function(e,o,n){if(console&&console.log){o=o||4,n=n||"darkcyan";var s=$pjs.messageLevels[o],r="[Youbora] "+s+": ";if("undefined"!=typeof $pjs.remoteLog&&$pjs.remoteLog.enabled===!0&&$pjs.remoteLog(r+e),$pjs.debugLevel>=o)if($pjs.plainConsole||document.documentMode)$pjs.plainReport(e,r);else{var i=console.log;1==o&&console.error?i=console.error:2==o&&console.warn?i=console.warn:o>=4&&console.debug&&(i=console.debug),r="%c"+r,e instanceof Array?(e.splice(0,0,r,"color: "+n),i.apply(console,e)):i.call(console,r,"color: "+n,e)}}},$pjs.plainReport=function(e,o){if(e instanceof Array)for(var n in e)$pjs.plainReport(n);else"string"==typeof e?console.log(o+e):(console.log(o+"<next line>"),console.log(e))},$pjs.error=function(){$pjs.report([].slice.call(arguments),1,"darkred")},$pjs.warn=function(){$pjs.report([].slice.call(arguments),2,"darkorange")},$pjs.notice=function(){$pjs.report([].slice.call(arguments),3,"darkcyan")},$pjs.noticeRequest=function(){$pjs.report([].slice.call(arguments),3,"darkgreen")},$pjs.debug=function(){$pjs.report([].slice.call(arguments),4,"indigo")},$pjs.verbose=function(){$pjs.report([].slice.call(arguments),5,"navy")};